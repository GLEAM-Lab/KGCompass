{"org": "fasterxml", "repo": "jackson-databind", "number": "4050", "fix_patch": "--- a/src/main/java/com/fasterxml/jackson/databind/ObjectMapper.java\n+++ b/src/main/java/com/fasterxml/jackson/databind/ObjectMapper.java\n@@ -3415,7 +3415,21 @@\n      *   {@code null} value node for which {@link JsonNode#isNull()} returns {@code true}.\n      */\n     @SuppressWarnings({ \"unchecked\", \"resource\" })\n-    public <T extends JsonNode> T valueToTree(Object fromValue)\n+    public <T extends JsonNode> T valueToTree(Object fromValue) throws IllegalArgumentException throws IllegalArgumentException {\n+        if (fromValue == null) {\n+            return null;\n+        }\n+        TokenBuffer buf = new TokenBuffer(this, false);\n+        try {\n+            _serializerProvider(getSerializationConfig()).serializeValue(buf, fromValue);\n+            JsonParser p = buf.asParser();\n+            T result = (T) readTree(p);\n+            p.close();\n+            return result;\n+        } catch (IOException e) { // should never occur\n+            throw new IllegalArgumentException(e.getMessage(), e);\n+        }\n+    }\n         throws IllegalArgumentException\n     {\n         // [databind#2430]: `null` should become \"null node\":\n"}
